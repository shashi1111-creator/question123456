<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmityQuestions - College Q&A Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#60a5fa',
                        accent: '#10b981',
                        background: '#f9fafb',
                        card: '#ffffff',
                        muted: '#f3f4f6'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
        }
        
        .vote-btn {
            transition: all 0.2s ease;
        }
        
        .vote-btn:hover {
            transform: scale(1.1);
        }
        
        .question-card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .active-tab {
            border-bottom: 2px solid #3b82f6;
            color: #1f2937;
            font-weight: 600;
        }
        
        .tag {
            transition: all 0.2s ease;
        }
        
        .tag:hover {
            transform: translateY(-2px);
        }
        
        .avatar {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: 600;
            color: white;
        }
        
        .leaderboard-card:nth-child(1) .avatar {
            background: linear-gradient(135deg, #f59e0b, #f97316);
        }
        
        .leaderboard-card:nth-child(2) .avatar {
            background: linear-gradient(135deg, #94a3b8, #64748b);
        }
        
        .leaderboard-card:nth-child(3) .avatar {
            background: linear-gradient(135deg, #a16207, #92400e);
        }
        
        .leaderboard-card:nth-child(n+4) .avatar {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .accepted-answer {
            border-left: 4px solid #10b981;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-background min-h-screen">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-white border-b border-gray-200 sticky top-0 z-10">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 flex items-center">
                            <div class="bg-primary text-white font-bold text-xl p-2 rounded">AQ</div>
                            <span class="ml-2 text-xl font-bold text-gray-900">AmityQuestions</span>
                        </div>
                        <nav class="hidden md:ml-10 md:flex space-x-8">
                            <button id="home-tab" class="tab-btn inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 hover:text-gray-700 active-tab">
                                <i class="fas fa-home mr-1"></i> Home
                            </button>
                            <button id="leaderboard-tab" class="tab-btn inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 hover:text-gray-700">
                                <i class="fas fa-trophy mr-1"></i> Leaderboard
                            </button>
                        </nav>
                    </div>
                    
                    <div class="flex items-center">
                        <button id="ask-btn" class="bg-primary hover:bg-blue-700 text-white flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors">
                            <i class="fas fa-plus mr-1"></i> Ask Question
                        </button>
                        
                        <div class="ml-4 flex items-center md:ml-6">
                            <button class="p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none">
                                <i class="fas fa-bell h-6 w-6"></i>
                            </button>
                            
                            <div class="ml-3 relative">
                                <div class="flex items-center space-x-2">
                                    <div class="bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-medium">AJ</div>
                                    <span class="hidden md:block text-sm font-medium text-gray-700" id="user-name">Alex Johnson</span>
                                </div>
                            </div>
                            
                            <button id="logout-btn" class="ml-2 text-sm text-gray-500 hover:text-gray-700">
                                Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-grow">
            <!-- Feed View -->
            <div id="feed-view" class="fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-900">Recent Questions</h1>
                    <div class="flex space-x-2">
                        <button id="sort-newest" class="sort-btn px-4 py-2 text-sm font-medium rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 active-sort">
                            Newest
                        </button>
                        <button id="sort-popular" class="sort-btn px-4 py-2 text-sm font-medium rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">
                            Popular
                        </button>
                    </div>
                </div>
                
                <div class="space-y-6" id="questions-container">
                    <!-- Questions will be dynamically inserted here -->
                </div>
            </div>
            
            <!-- Question Detail View -->
            <div id="question-view" class="hidden fade-in">
                <button id="back-to-feed" class="mb-4 flex items-center text-sm text-gray-600 hover:text-gray-900">
                    <i class="fas fa-arrow-left mr-1"></i> Back to Questions
                </button>
                
                <div class="bg-white rounded-lg shadow mb-6">
                    <div class="p-6">
                        <div class="flex">
                            <div class="flex flex-col items-center mr-4">
                                <button class="vote-btn text-gray-400 hover:text-blue-600" data-type="question" data-id="1">
                                    <i class="fas fa-heart h-5 w-5"></i>
                                </button>
                                <span class="my-1 font-medium" id="question-votes">24</span>
                                <button class="vote-btn text-gray-400 hover:text-red-600" data-type="question" data-id="1">
                                    <i class="fas fa-heart h-5 w-5 rotate-180"></i>
                                </button>
                            </div>
                            
                            <div class="flex-1">
                                <h1 class="text-2xl font-bold text-gray-900" id="question-title">How to prepare for final exams effectively?</h1>
                                <div class="mt-4 flex flex-wrap gap-2" id="question-tags">
                                    <span class="tag inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        study-tips
                                    </span>
                                    <span class="tag inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        exams
                                    </span>
                                </div>
                                <p class="mt-4 text-gray-700 whitespace-pre-line" id="question-content">I'm struggling with time management and retaining information. Any proven study techniques?</p>
                                
                                <div class="mt-6 flex items-center">
                                    <div class="bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-medium">AJ</div>
                                    <div class="ml-3">
                                        <p class="text-sm font-medium text-gray-900">Alex Johnson</p>
                                        <p class="text-sm text-gray-500">Asked on Jan 15, 2024</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4" id="answers-count">2 Answers</h2>
                    
                    <div class="space-y-6" id="answers-container">
                        <!-- Answers will be dynamically inserted here -->
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow">
                    <div class="p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Your Answer</h3>
                        <form id="answer-form">
                            <textarea id="answer-content" placeholder="Write your answer here..." rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary"></textarea>
                            <div class="mt-4 flex justify-end">
                                <button type="submit" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                                    Post Your Answer
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Ask Question View -->
            <div id="ask-view" class="hidden fade-in max-w-3xl mx-auto">
                <div class="bg-white rounded-lg shadow">
                    <div class="p-6">
                        <h2 class="text-xl font-bold text-gray-900 mb-2">Ask a Question</h2>
                        <p class="text-gray-600 mb-6">Be specific and provide enough details for others to help you.</p>
                        
                        <form id="question-form">
                            <div class="mb-4">
                                <label for="question-title" class="block text-sm font-medium text-gray-700 mb-1">
                                    Question Title
                                </label>
                                <input type="text" id="question-title" placeholder="e.g. How to center a div with CSS?" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
                            </div>
                            
                            <div class="mb-4">
                                <label for="question-content" class="block text-sm font-medium text-gray-700 mb-1">
                                    Question Details
                                </label>
                                <textarea id="question-details" placeholder="Provide more details about your question..." rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary"></textarea>
                            </div>
                            
                            <div class="mb-6">
                                <label for="question-tags" class="block text-sm font-medium text-gray-700 mb-1">
                                    Tags (comma separated)
                                </label>
                                <input type="text" id="question-tags" placeholder="e.g. react, javascript, css" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
                            </div>
                            
                            <div class="flex justify-end space-x-3">
                                <button type="button" id="cancel-ask" class="px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                    Cancel
                                </button>
                                <button type="submit" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                                    Post Question
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Leaderboard View -->
            <div id="leaderboard-view" class="hidden fade-in">
                <h1 class="text-2xl font-bold text-gray-900 mb-6">Top Contributors</h1>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="leaderboard-container">
                    <!-- Leaderboard items will be dynamically inserted here -->
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-white border-t border-gray-200 py-6">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="md:flex md:items-center md:justify-between">
                    <div class="flex justify-center md:justify-start">
                        <div class="flex items-center">
                            <div class="bg-primary text-white font-bold text-lg p-1 rounded">AQ</div>
                            <span class="ml-2 text-lg font-bold text-gray-900">AmityQuestions</span>
                        </div>
                    </div>
                    <div class="mt-4 md:mt-0 md:order-1">
                        <p class="text-center text-sm text-gray-500">
                            &copy; 2024 AmityQuestions. All rights reserved.
                        </p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Mock data
        const mockUsers = [
            { id: "1", name: "Alex Johnson", email: "alex@example.com", points: 1250, joinDate: "2023-01-15" },
            { id: "2", name: "Taylor Smith", email: "taylor@example.com", points: 980, joinDate: "2023-03-22" },
            { id: "3", name: "Jordan Lee", email: "jordan@example.com", points: 870, joinDate: "2023-05-10" },
            { id: "4", name: "Casey Brown", email: "casey@example.com", points: 760, joinDate: "2023-07-01" },
            { id: "5", name: "Morgan Taylor", email: "morgan@example.com", points: 650, joinDate: "2023-08-12" },
            { id: "6", name: "Riley Davis", email: "riley@example.com", points: 540, joinDate: "2023-09-25" }
        ];

        const mockQuestions = [
            {
                id: "1",
                title: "How to prepare for final exams effectively?",
                content: "I'm struggling with time management and retaining information. Any proven study techniques?",
                author: mockUsers[0],
                timestamp: "2024-01-15T10:30:00Z",
                votes: 24,
                tags: ["study-tips", "exams"],
                answers: [
                    {
                        id: "a1",
                        content: "I recommend the Pomodoro Technique combined with active recall. Study in 25-minute focused sessions with 5-minute breaks.",
                        author: mockUsers[1],
                        timestamp: "2024-01-15T12:15:00Z",
                        votes: 15,
                        isAccepted: true
                    },
                    {
                        id: "a2",
                        content: "Create a study schedule 2 weeks before exams. Focus on weak subjects first and review past papers.",
                        author: mockUsers[2],
                        timestamp: "2024-01-15T14:20:00Z",
                        votes: 8,
                        isAccepted: false
                    }
                ]
            },
            {
                id: "2",
                title: "Best resources for learning React in 2024?",
                content: "Looking for up-to-date tutorials and courses for React development. What do you recommend?",
                author: mockUsers[1],
                timestamp: "2024-01-14T09:45:00Z",
                votes: 18,
                tags: ["react", "web-development"],
                answers: [
                    {
                        id: "a3",
                        content: "The official React documentation is the best starting point. Then try the React course on Frontend Masters.",
                        author: mockUsers[3],
                        timestamp: "2024-01-14T11:30:00Z",
                        votes: 12,
                        isAccepted: false
                    }
                ]
            },
            {
                id: "3",
                title: "How to balance coursework and part-time job?",
                content: "I'm working 20 hours a week while taking a full course load. Any tips for managing time effectively?",
                author: mockUsers[2],
                timestamp: "2024-01-13T14:20:00Z",
                votes: 15,
                tags: ["time-management", "work-life-balance"],
                answers: [
                    {
                        id: "a4",
                        content: "Use a digital calendar to block time for classes, work, and study sessions. Prioritize tasks by importance and deadline.",
                        author: mockUsers[0],
                        timestamp: "2024-01-13T16:45:00Z",
                        votes: 9,
                        isAccepted: false
                    }
                ]
            }
        ];

        // App state
        let state = {
            currentUser: mockUsers[0],
            currentView: 'feed',
            selectedQuestion: null,
            questions: [...mockQuestions],
            sortOption: 'newest'
        };

        // DOM Elements
        const elements = {
            app: document.getElementById('app'),
            feedView: document.getElementById('feed-view'),
            questionView: document.getElementById('question-view'),
            askView: document.getElementById('ask-view'),
            leaderboardView: document.getElementById('leaderboard-view'),
            questionsContainer: document.getElementById('questions-container'),
            answersContainer: document.getElementById('answers-container'),
            questionTitle: document.getElementById('question-title'),
            questionContent: document.getElementById('question-content'),
            questionVotes: document.getElementById('question-votes'),
            questionTags: document.getElementById('question-tags'),
            answersCount: document.getElementById('answers-count'),
            leaderboardContainer: document.getElementById('leaderboard-container'),
            userName: document.getElementById('user-name')
        };

        // Initialize the app
        function initApp() {
            renderQuestions();
            setupEventListeners();
            updateUI();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Navigation
            document.getElementById('home-tab').addEventListener('click', () => switchView('feed'));
            document.getElementById('leaderboard-tab').addEventListener('click', () => switchView('leaderboard'));
            document.getElementById('ask-btn').addEventListener('click', () => switchView('ask'));
            document.getElementById('back-to-feed').addEventListener('click', () => switchView('feed'));
            document.getElementById('cancel-ask').addEventListener('click', () => switchView('feed'));
            document.getElementById('logout-btn').addEventListener('click', handleLogout);
            
            // Sorting
            document.getElementById('sort-newest').addEventListener('click', () => {
                state.sortOption = 'newest';
                updateSortButtons();
                renderQuestions();
            });
            
            document.getElementById('sort-popular').addEventListener('click', () => {
                state.sortOption = 'popular';
                updateSortButtons();
                renderQuestions();
            });
            
            // Forms
            document.getElementById('question-form').addEventListener('submit', handleAskQuestion);
            document.getElementById('answer-form').addEventListener('submit', handleAnswerSubmit);
            
            // Voting (delegated)
            document.addEventListener('click', (e) => {
                if (e.target.closest('.vote-btn')) {
                    const btn = e.target.closest('.vote-btn');
                    const type = btn.dataset.type;
                    const id = btn.dataset.id;
                    const isUpvote = !btn.querySelector('.fa-heart').classList.contains('rotate-180');
                    handleVote(type, id, isUpvote);
                }
            });
        }

        // Switch between views
        function switchView(view) {
            state.currentView = view;
            updateUI();
            
            if (view === 'feed') {
                renderQuestions();
            } else if (view === 'question') {
                renderQuestionDetail();
            } else if (view === 'leaderboard') {
                renderLeaderboard();
            }
        }

        // Update UI based on current view
        function updateUI() {
            elements.feedView.classList.add('hidden');
            elements.questionView.classList.add('hidden');
            elements.askView.classList.add('hidden');
            elements.leaderboardView.classList.add('hidden');
            
            document.getElementById('home-tab').classList.remove('active-tab');
            document.getElementById('leaderboard-tab').classList.remove('active-tab');
            
            switch (state.currentView) {
                case 'feed':
                    elements.feedView.classList.remove('hidden');
                    document.getElementById('home-tab').classList.add('active-tab');
                    break;
                case 'question':
                    elements.questionView.classList.remove('hidden');
                    document.getElementById('home-tab').classList.add('active-tab');
                    break;
                case 'ask':
                    elements.askView.classList.remove('hidden');
                    document.getElementById('home-tab').classList.add('active-tab');
                    break;
                case 'leaderboard':
                    elements.leaderboardView.classList.remove('hidden');
                    document.getElementById('leaderboard-tab').classList.add('active-tab');
                    break;
            }
            
            // Update user name
            elements.userName.textContent = state.currentUser.name;
        }

        // Update sort buttons
        function updateSortButtons() {
            document.getElementById('sort-newest').classList.remove('active-sort');
            document.getElementById('sort-popular').classList.remove('active-sort');
            
            if (state.sortOption === 'newest') {
                document.getElementById('sort-newest').classList.add('active-sort');
            } else {
                document.getElementById('sort-popular').classList.add('active-sort');
            }
        }

        // Render questions in feed
        function renderQuestions() {
            const sortedQuestions = [...state.questions].sort((a, b) => {
                if (state.sortOption === 'popular') {
                    return b.votes - a.votes;
                }
                return new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime();
            });
            
            elements.questionsContainer.innerHTML = '';
            
            sortedQuestions.forEach(question => {
                const questionElement = document.createElement('div');
                questionElement.className = 'bg-white rounded-lg shadow question-card cursor-pointer';
                questionElement.innerHTML = `
                    <div class="p-6">
                        <div class="flex">
                            <div class="flex flex-col items-center mr-4">
                                <button class="vote-btn text-gray-400 hover:text-blue-600" data-type="question" data-id="${question.id}">
                                    <i class="fas fa-heart h-5 w-5"></i>
                                </button>
                                <span class="my-1 font-medium">${question.votes}</span>
                                <button class="vote-btn text-gray-400 hover:text-red-600" data-type="question" data-id="${question.id}">
                                    <i class="fas fa-heart h-5 w-5 rotate-180"></i>
                                </button>
                            </div>
                            
                            <div class="flex-1">
                                <h2 class="text-lg font-semibold text-gray-900 hover:text-blue-600">${question.title}</h2>
                                <p class="mt-2 text-gray-600 line-clamp-2">${question.content}</p>
                                
                                <div class="mt-4 flex flex-wrap gap-2">
                                    ${question.tags.map(tag => `
                                        <span class="tag inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            ${tag}
                                        </span>
                                    `).join('')}
                                </div>
                                
                                <div class="mt-4 flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium">
                                            ${question.author.name.charAt(0)}
                                        </div>
                                        <span class="ml-2 text-sm text-gray-500">
                                            ${question.author.name} • ${formatDate(question.timestamp)}
                                        </span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-500">
                                        <span>${question.answers.length} answers</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                questionElement.addEventListener('click', (e) => {
                    if (!e.target.closest('.vote-btn')) {
                        state.selectedQuestion = question;
                        switchView('question');
                    }
                });
                
                elements.questionsContainer.appendChild(questionElement);
            });
        }

        // Render question detail view
        function renderQuestionDetail() {
            const question = state.selectedQuestion;
            if (!question) return;
            
            elements.questionTitle.textContent = question.title;
            elements.questionContent.textContent = question.content;
            elements.questionVotes.textContent = question.votes;
            
            elements.questionTags.innerHTML = '';
            question.tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800';
                tagElement.textContent = tag;
                elements.questionTags.appendChild(tagElement);
            });
            
            elements.answersCount.textContent = `${question.answers.length} ${question.answers.length === 1 ? 'Answer' : 'Answers'}`;
            
            elements.answersContainer.innerHTML = '';
            question.answers.forEach(answer => {
                const answerElement = document.createElement('div');
                answerElement.className = `bg-white rounded-lg shadow ${answer.isAccepted ? 'accepted-answer' : ''}`;
                answerElement.innerHTML = `
                    <div class="p-6">
                        <div class="flex">
                            <div class="flex flex-col items-center mr-4">
                                <button class="vote-btn text-gray-400 hover:text-blue-600" data-type="answer" data-id="${answer.id}">
                                    <i class="fas fa-heart h-5 w-5"></i>
                                </button>
                                <span class="my-1 font-medium">${answer.votes}</span>
                                <button class="vote-btn text-gray-400 hover:text-red-600" data-type="answer" data-id="${answer.id}">
                                    <i class="fas fa-heart h-5 w-5 rotate-180"></i>
                                </button>
                            </div>
                            
                            <div class="flex-1">
                                <p class="text-gray-700 whitespace-pre-line">${answer.content}</p>
                                
                                <div class="mt-4 flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium">
                                            ${answer.author.name.charAt(0)}
                                        </div>
                                        <span class="ml-2 text-sm text-gray-500">
                                            ${answer.author.name} • ${formatDate(answer.timestamp)}
                                        </span>
                                    </div>
                                    ${answer.isAccepted ? `
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            <i class="fas fa-check mr-1"></i> Accepted
                                        </span>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                elements.answersContainer.appendChild(answerElement);
            });
        }

        // Render leaderboard
        function renderLeaderboard() {
            const sortedUsers = [...mockUsers].sort((a, b) => b.points - a.points);
            
            elements.leaderboardContainer.innerHTML = '';
            
            sortedUsers.forEach((user, index) => {
                const position = index + 1;
                let positionClass = '';
                let positionText = '';
                
                if (position === 1) {
                    positionClass = 'bg-yellow-100 border-yellow-300';
                    positionText = '1st';
                } else if (position === 2) {
                    positionClass = 'bg-gray-100 border-gray-300';
                    positionText = '2nd';
                } else if (position === 3) {
                    positionClass = 'bg-amber-100 border-amber-300';
                    positionText = '3rd';
                } else {
                    positionClass = 'bg-white border-gray-200';
                    positionText = `${position}th`;
                }
                
                const userElement = document.createElement('div');
                userElement.className = `bg-white rounded-lg shadow leaderboard-card border ${positionClass}`;
                userElement.innerHTML = `
                    <div class="p-6">
                        <div class="flex items-center">
                            <div class="avatar w-12 h-12 text-lg">
                                ${user.name.charAt(0)}
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold">${user.name}</h3>
                                <p class="text-sm text-gray-500">${user.points} points</p>
                            </div>
                            <div class="ml-auto">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                    ${positionText}
                                </span>
                            </div>
                        </div>
                        <div class="mt-4 text-sm text-gray-500">
                            Member since ${formatDate(user.joinDate)}
                        </div>
                    </div>
                `;
                elements.leaderboardContainer.appendChild(userElement);
            });
        }

        // Handle asking a question
        function handleAskQuestion(e) {
            e.preventDefault();
            
            const title = document.getElementById('question-title').value;
            const content = document.getElementById('question-details').value;
            const tags = document.getElementById('question-tags').value.split(',').map(tag => tag.trim()).filter(tag => tag);
            
            if (!title || !content) return;
            
            const newQuestion = {
                id: `q${state.questions.length + 1}`,
                title,
                content,
                author: state.currentUser,
                timestamp: new Date().toISOString(),
                votes: 0,
                tags,
                answers: []
            };
            
            state.questions.unshift(newQuestion);
            switchView('feed');
            
            // Reset form
            document.getElementById('question-form').reset();
        }

        // Handle submitting an answer
        function handleAnswerSubmit(e) {
            e.preventDefault();
            
            const content = document.getElementById('answer-content').value;
            if (!content || !state.selectedQuestion) return;
            
            const newAnswer = {
                id: `a${state.selectedQuestion.answers.length + 1}`,
                content,
                author: state.currentUser,
                timestamp: new Date().toISOString(),
                votes: 0,
                isAccepted: false
            };
            
            state.selectedQuestion.answers.push(newAnswer);
            
            // Update questions array
            state.questions = state.questions.map(q => 
                q.id === state.selectedQuestion.id ? state.selectedQuestion : q
            );
            
            renderQuestionDetail();
            document.getElementById('answer-form').reset();
        }

        // Handle voting
        function handleVote(type, id, isUpvote) {
            if (type === 'question') {
                state.questions = state.questions.map(q => {
                    if (q.id === id) {
                        return { ...q, votes: isUpvote ? q.votes + 1 : q.votes - 1 };
                    }
                    return q;
                });
                
                if (state.selectedQuestion && state.selectedQuestion.id === id) {
                    state.selectedQuestion.votes = isUpvote ? state.selectedQuestion.votes + 1 : state.selectedQuestion.votes - 1;
                    elements.questionVotes.textContent = state.selectedQuestion.votes;
                }
                
                if (state.currentView === 'feed') {
                    renderQuestions();
                }
            } else {
                state.questions = state.questions.map(q => {
                    if (q.id === state.selectedQuestion.id) {
                        const updatedAnswers = q.answers.map(a => {
                            if (a.id === id) {
                                return { ...a, votes: isUpvote ? a.votes + 1 : a.votes - 1 };
                            }
                            return a;
                        });
                        return { ...q, answers: updatedAnswers };
                    }
                    return q;
                });
                
                if (state.selectedQuestion) {
                    state.selectedQuestion.answers = state.selectedQuestion.answers.map(a => {
                        if (a.id === id) {
                            return { ...a, votes: isUpvote ? a.votes + 1 : a.votes - 1 };
                        }
                        return a;
                    });
                    
                    if (state.currentView === 'question') {
                        renderQuestionDetail();
                    }
                }
            }
        }

        // Handle logout
        function handleLogout() {
            // In a real app, this would clear the session
            alert('You have been logged out!');
            // For demo purposes, we'll just refresh the page
            location.reload();
        }

        // Format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>